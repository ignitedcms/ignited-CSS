<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.4.2/Sortable.min.js"></script>

</head>

<body>

    <h1 class="page-header">VueSortable Callback</h1>


    <div id="box">
        <h2>{{ title }}</h2>
        <div id="items">
            <template v-for="item in items">
                <div class="item">{{ item.title }}</div>
            </template>
        </div>
        <div><button v-on:click.stop.prevent="addItem">Add item</button></div>

        <h3>Sorted Data Source</h3>

        <pre>{{ items }}</pre>
    </div>




    <script type="text/javascript">
        new Vue({
            el: '#box',
            data: {
                title: 'Sortable items',
                items: [{
                        title: "Item 1"
                    },
                    {
                        title: "Item 2"
                    },
                    {
                        title: "Item 3"
                    }
                ]
            },
            methods: {
                addItem: function () {
                    var id = Math.floor((Math.random() * 100) + 4);
                    this.items.push({
                        id: id,
                        title: 'Random item ' + id
                    });
                }
            },
            mounted: function () {
                var self = this;
                self.$nextTick(function () {
                    var sortable = Sortable.create(document.getElementById('items'), {
                        onEnd: function (e) {
                            var clonedItems = self.items.filter(function (item) {
                                return item;
                            });
                            clonedItems.splice(e.newIndex, 0, clonedItems.splice(e
                                .oldIndex, 1)[0]);
                            self.items = [];
                            self.$nextTick(function () {
                                self.items = clonedItems;
                            });
                        }
                    });
                });
            }
        });
    </script>



</body>

</html>