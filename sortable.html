<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.4.2/Sortable.min.js"></script>
</head>
<body>

    <h1 class="page-header">VueSortable Callback</h1>
    <div id="box">
        <h2>{{ title }}</h2>
        <div id="things">
            <div v-for="item in things">
                <div class="item">{{ item.title }}</div>
            </div>
        </div>
        <div><button v-on:click.stop.prevent="addItem">Add item</button></div>

        <h3>Sorted Data Source</h3>

        <pre>{{ things }}</pre>
    </div>

    <script type="text/javascript">
        new Vue({
            el: '#box',
            data: {
                title: 'Sortable items',
                things: [   
                    {
                        title: "Item 1"
                    },
                    {
                        title: "Item 2"
                    },
                    {
                        title: "Item 3"
                    }
                ]
            },
            methods: {
                addItem: function () {
                    var id = Math.floor((Math.random() * 100) + 4);
                    this.things.push({
                        id: id,
                        title: 'Random item ' + id
                    });
                }
            },
            mounted: function () {
                var self = this;
                self.$nextTick(function () {
                    var sortable = Sortable.create(document.getElementById('things'), {
                        onEnd: function (e) {
                            var clonedItems = self.things.filter(function (item) {
                                return item;
                            });
                            clonedItems.splice(e.newIndex, 0, clonedItems.splice(e
                                .oldIndex, 1)[0]);
                            self.things = [];
                            self.$nextTick(function () {
                                self.things = clonedItems;
                            });
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>