<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Datepicker</title>
  <style>
    /* Some basic styling */
    .datepicker {
      font-family: Arial, sans-serif;
      border: 1px solid #ccc;
      padding: 10px;
      display: inline-block;
    }
    table {
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 5px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    td:hover {
      background-color: #f0f0f0;
      cursor: pointer;
    }
    .current-date {
      background-color: #c5e1a5;
      font-weight: bold;
    }
  </style>
</head>
<body>

<input type="text" id="selectedDate" readonly>
<div class="datepicker"></div>

<script>
  var today = new Date();
  var currentMonth = today.getMonth();
  var currentYear = today.getFullYear();

  function renderDatePicker() {
    var datePicker = document.querySelector('.datepicker');
    datePicker.innerHTML = '';

    var table = document.createElement('table');

    var headerRow = table.insertRow();
    var previousCell = headerRow.insertCell();
    var monthYearCell = headerRow.insertCell();
    var nextCell = headerRow.insertCell();

    previousCell.textContent = '<';
    monthYearCell.colSpan = 5;
    monthYearCell.textContent = getMonthName(currentMonth) + ' ' + currentYear;
    nextCell.textContent = '>';

    previousCell.addEventListener('click', showPreviousMonth);
    nextCell.addEventListener('click', showNextMonth);

    var weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    var weekdaysRow = table.insertRow();
    weekdays.forEach(function(day) {
      var th = document.createElement('th');
      th.textContent = day;
      weekdaysRow.appendChild(th);
    });

    var firstDay = new Date(currentYear, currentMonth, 1);
    var startingDay = firstDay.getDay();

    var totalDays = new Date(currentYear, currentMonth + 1, 0).getDate();

    var date = 1;
    for (var i = 0; i < 6; i++) {
      var row = table.insertRow();

      for (var j = 0; j < 7; j++) {
        if (i === 0 && j < startingDay) {
          var cell = row.insertCell();
          cell.textContent = '';
        } else if (date > totalDays) {
          break;
        } else {
          var cell = row.insertCell();
          cell.textContent = date;
          cell.setAttribute('data-date', date);
          cell.setAttribute('data-month', currentMonth);
          cell.setAttribute('data-year', currentYear);
          cell.addEventListener('click', function() {
            var selectedDate = new Date(this.getAttribute('data-year'), this.getAttribute('data-month'), this.getAttribute('data-date'));
            var formattedDate = selectedDate.getFullYear() + '-' + ('0' + (selectedDate.getMonth() + 1)).slice(-2) + '-' + ('0' + selectedDate.getDate()).slice(-2);
            document.getElementById('selectedDate').value = formattedDate;
            console.log('Selected Date:', formattedDate);
          });
          if (currentYear === today.getFullYear() && currentMonth === today.getMonth() && date === today.getDate()) {
            cell.classList.add('current-date');
          }
          date++;
        }
      }
    }

    datePicker.appendChild(table);
  }

  function showPreviousMonth() {
    currentMonth--;
    if (currentMonth < 0) {
      currentMonth = 11;
      currentYear--;
    }
    renderDatePicker();
  }

  function showNextMonth() {
    currentMonth++;
    if (currentMonth > 11) {
      currentMonth = 0;
      currentYear++;
    }
    renderDatePicker();
  }

  function getMonthName(monthIndex) {
    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    return months[monthIndex];
  }

  renderDatePicker();
</script>

</body>
</html>

