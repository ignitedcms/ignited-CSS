<!DOCTYPE html>
<html>
<head>
  <title>Accessible Tab Component</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
</head>
<body>
  <div id="app">
    <div role="tablist">
      <button
        v-for="(tab, index) in tabs"
        :key="index"
        :id="tabIds[index].tabId"
        :role="'tab'"
        :aria-selected="currentIndex === index"
        :aria-controls="tabIds[index].panelId"
        :tabindex="currentIndex === index ? 0 : -1"
        @click="changeTab(index)"
        @keydown="onTabKeyDown($event, index)"
        ref="tabButtons"
      >
        {{ tab.title }}
      </button>
    </div>
    <div>
      <div
        v-for="(tab, index) in tabs"
        :key="index"
        :id="tabIds[index].panelId"
        :role="'tabpanel'"
        :aria-labelledby="tabIds[index].tabId"
        :aria-hidden="currentIndex !== index"
        :tabindex="currentIndex === index ? 0 : -1"
        ref="tabPanels"
      >
        <div v-if="currentIndex === index">
          {{ tab.content }}
        </div>
      </div>
    </div>
  </div>

  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          currentIndex: 0,
          tabs: [
            { title: 'Tab 1', content: 'Content for Tab 1' },
            { title: 'Tab 2', content: 'Content for Tab 2' },
            { title: 'Tab 3', content: 'Content for Tab 3' }
            // Add more tabs as needed
          ],
          tabIds: [] // Store generated IDs
        };
      },
      mounted() {
        this.generateTabIds();
      },
      methods: {
        changeTab(index) {
          this.currentIndex = index;
          this.$nextTick(() => {
            this.$refs.tabPanels[index].focus();
          });
        },
        onTabKeyDown(event, index) {
          const tabsCount = this.tabs.length;

          switch (event.key) {
            case 'ArrowRight':
              event.preventDefault();
              this.currentIndex = (index + 1) % tabsCount;
              this.$refs.tabButtons[this.currentIndex].focus();
              break;
            case 'ArrowLeft':
              event.preventDefault();
              this.currentIndex = (index - 1 + tabsCount) % tabsCount;
              this.$refs.tabButtons[this.currentIndex].focus();
              break;
            case 'Home':
              event.preventDefault();
              this.currentIndex = 0;
              this.$refs.tabButtons[this.currentIndex].focus();
              break;
            case 'End':
              event.preventDefault();
              this.currentIndex = tabsCount - 1;
              this.$refs.tabButtons[this.currentIndex].focus();
              break;
            case 'Enter':
            case 'Space':
              event.preventDefault();
              this.changeTab(index);
              break;
            default:
              break;
          }
        },
        generateTabIds() {
          this.tabIds = this.tabs.map((_, index) => ({
            tabId: `tab-${Math.random().toString(36).substr(2, 9)}`,
            panelId: `panel-${Math.random().toString(36).substr(2, 9)}`
          }));
        }
      }
    });
  </script>
</body>
</html>

